<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Happier</title>
    <description>Still roaming</description>
    <link>http://yourdomain.com/</link>
    <atom:link href="http://yourdomain.com/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Sun, 10 Apr 2016 15:59:05 +0800</pubDate>
    <lastBuildDate>Sun, 10 Apr 2016 15:59:05 +0800</lastBuildDate>
    <generator>Jekyll v3.1.2</generator>
    
      <item>
        <title>新后台架构的提议</title>
        <description>&lt;h3 id=&quot;section&quot;&gt;背景&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;原先的后台必须整个弃用&lt;/li&gt;
  &lt;li&gt;joker项目已经进展了一年有余，目前到了需要出产品的关键时刻，产品进度很紧&lt;/li&gt;
  &lt;li&gt;多次后台调整对手机端的适配肯定不是好事，因为每一次调整势必意味着手机端做出一次适配&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;section-1&quot;&gt;目标&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;后台需要尽快搭建完成&lt;/li&gt;
  &lt;li&gt;接口需要尽可能健壮和完整，能适应app业务变动&lt;/li&gt;
  &lt;li&gt;定义接口文档（原先接口文档也很混乱）－－ TODO: 之后自动化测试接口&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;section-2&quot;&gt;提议方向&lt;/h3&gt;

&lt;h4 id=&quot;saas&quot;&gt;1. 新浪云(SaaS云)&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;优点
    &lt;ol&gt;
      &lt;li&gt;灵活 可以选择自己的 DB，Server等&lt;/li&gt;
      &lt;li&gt;易于迁移到其他服务提供商（迁移到阿里云或百度云）&lt;/li&gt;
      &lt;li&gt;价格相交Baas更低&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;缺点
    &lt;ol&gt;
      &lt;li&gt;开发周期长&lt;/li&gt;
      &lt;li&gt;许多基础功能（REST接口，登陆／安全 等）需要从头实现和考虑&lt;/li&gt;
      &lt;li&gt;需要自己定义文档&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;leancloudbaashttpsleancloudcn&quot;&gt;2. &lt;a href=&quot;https://leancloud.cn/&quot;&gt;LeanCloud(BaaS云)&lt;/a&gt;&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;优点
    &lt;ol&gt;
      &lt;li&gt;专门为了手机app提供的后台＋存储＋消息服务解决方案&lt;/li&gt;
      &lt;li&gt;封装了大量通用的逻辑（数据访问，登陆注册，备份等）&lt;/li&gt;
      &lt;li&gt;文档齐全&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;缺点
    &lt;ol&gt;
      &lt;li&gt;迁徙到其他服务商比较复杂&lt;/li&gt;
      &lt;li&gt;&lt;em&gt;价格较Saas略高&lt;/em&gt;（但我比较了两者价格模型 发现其实并没有差距）&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;section-3&quot;&gt;选择&lt;/h3&gt;
&lt;p&gt;就我而言我支持将后台搬到Leancloud上，好处是重新搭建后台的进度将大大加快，只需要定义了数据模型，所有接口都会自动生成。
  另Leancloud提供的消息／推送等功能也很实用，将会大大降低后台开发和维护的成本。&lt;/p&gt;

&lt;p&gt;唯一值得注意的风险是如果Leancloud停止服务（今年初Facebook宣布将会关停旗下一个类似的服务Parse，但将会继续服务1年的时间供开发者迁徙，并给出了迁徙工具和文档）将会有类似迁徙的成本，但个人的观察而言目前Leanckoud活跃度和用户数都良好&lt;/p&gt;
</description>
        <pubDate>Sun, 10 Apr 2016 00:00:00 +0800</pubDate>
        <link>http://yourdomain.com/joker/2016/04/10/new-backend-proposal.html</link>
        <guid isPermaLink="true">http://yourdomain.com/joker/2016/04/10/new-backend-proposal.html</guid>
        
        
        <category>joker</category>
        
      </item>
    
      <item>
        <title>之前后台存在的问题</title>
        <description>&lt;h3 id=&quot;section&quot;&gt;代码&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;代码是根据一个其他项目修改的，存在大量冗余代码，可维护性差 &lt;img src=&quot;/assets/joker/copied-codes.png&quot; alt=&quot;其他项目代码&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;代码格式无规范，有许多代码块重复，异常没有处理 &lt;img src=&quot;/assets/joker/repetitive-codes.png&quot; alt=&quot;重复代码&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;DAO层实现没有使用ORM框架，而是使用jdbcTemplate搞定CRUD，极难维护（以及图中重复代码） &lt;img src=&quot;/assets/joker/no-orm.png&quot; alt=&quot;没有ORM&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;section-1&quot;&gt;数据库&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;命名无规范（图中其实是游戏的数据表） &lt;img src=&quot;/assets/joker/db-naming.png&quot; alt=&quot;命名无规范&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;由于Sinaapp欠费无法看到数据库，但我怀疑有许多不相关数据都存在数据库中（指那个其他项目的数据）&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;没有仔细看遍sql，不过似乎外键和index都无定义（图中AUTHOR应定义与作者表相连的外键） &lt;img src=&quot;/assets/joker/db-foreign-key.png&quot; alt=&quot;数据表定义&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;数据表结构混乱，扩展困难&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;section-2&quot;&gt;传输&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;HTTP传输明文账号密码，不安全&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;section-3&quot;&gt;接口定义&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;接口不完整（目前定义的所有借口，明显不足） &lt;img src=&quot;/assets/joker/all-apis.png&quot; alt=&quot;所有接口&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Sun, 10 Apr 2016 00:00:00 +0800</pubDate>
        <link>http://yourdomain.com/joker/2016/04/10/issues-in-old-api.html</link>
        <guid isPermaLink="true">http://yourdomain.com/joker/2016/04/10/issues-in-old-api.html</guid>
        
        
        <category>joker</category>
        
      </item>
    
  </channel>
</rss>
