---
layout: post
title:  "新后台架构的提议"
categories: joker
---

### 背景
- 原先的后台必须整个弃用
- joker项目已经进展了一年有余，目前到了需要出产品的关键时刻，产品进度很紧
- 多次后台调整对手机端的适配肯定不是好事，因为每一次调整势必意味着手机端做出一次适配

### 目标
- 后台需要尽快搭建完成
- 接口需要尽可能健壮和完整，能适应app业务变动
- 定义接口文档（原先接口文档也很混乱）－－ TODO: 之后自动化测试接口

### 提议方向

#### 1. 新浪云(SaaS云)    
  - 优点
    1. 灵活 可以选择自己的 DB，Server等
    2. 易于迁移到其他服务提供商（迁移到阿里云或百度云）
    3. 价格相交Baas更低
  - 缺点  
    1. 开发周期长
    2. 许多基础功能（REST接口，登陆／安全 等）需要从头实现和考虑
    3. 需要自己定义文档 
    
#### 2. [LeanCloud(BaaS云)](https://leancloud.cn/)
  - 优点
    1. 专门为了手机app提供的后台＋存储＋消息服务解决方案
    2. 封装了大量通用的逻辑（数据访问，登陆注册，备份等）
    3. 文档齐全
  - 缺点
    1. 迁徙到其他服务商比较复杂
    2. *价格较Saas略高*（但我比较了两者价格模型 发现其实并没有差距）
    
### 选择
  就我而言我支持将后台搬到Leancloud上，好处是重新搭建后台的进度将大大加快，只需要定义了数据模型，所有接口都会自动生成。
  另Leancloud提供的消息／推送等功能也很实用，将会大大降低后台开发和维护的成本。
  
  唯一值得注意的风险是如果Leancloud停止服务（今年初Facebook宣布将会关停旗下一个类似的服务Parse，但将会继续服务1年的时间供开发者迁徙，并给出了迁徙工具和文档）将会有类似迁徙的成本，但个人的观察而言目前Leanckoud活跃度和用户数都良好